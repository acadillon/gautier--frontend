---
import fetchApi from '../assets/scripts/lib/strapi.js';

import Layout from '../layouts/Layout.astro';
import HeaderProjet from '../layouts/Header-projet.jsx'
import Project from '../layouts/Project.jsx'

export async function getStaticPaths() {
  const projects = await fetchApi({
    endpoint: 'projects?populate=*',
    wrappedByKey: 'data',
  });

  return projects.map((project) => {
    return {
      params: { slug: project.slug },
      props: { project },
    };
  });
}

const { slug } = Astro.params;
const { project } = Astro.props;
export const prerender = true;
---

<Layout title="Welcome to Astro.">

  <HeaderProjet data={project}/>
  <Project data={project} client:only="react"/>

</Layout>

